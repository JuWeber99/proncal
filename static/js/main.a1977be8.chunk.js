(this.webpackJsonpresch1=this.webpackJsonpresch1||[]).push([[0],{110:function(e,t,a){},112:function(e,t,a){},116:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),o=a(10),i=a(54),s=a(9),u=a.n(s),d=(a(91),a(31)),m=a.n(d),f=a(39),E=a(82),b=a(40),v=a.n(b),h=a(73),p=a(37),g=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"mergeAssociatedEvents",value:function(e){return e.forEach((function(t,a){if(a!==e.length&&0!==a)for(;e[a].summary===e[a-1].summary&&u()(e[a].dtend).date()===u()(e[a-1].dtend).date();)e[a-1].dtend=e[a].dtend,e.splice(a,1)})),e}},{key:"transformToApiEvent",value:function(e){return e.map((function(e){return{allDay:!1,title:e.summary.replace(/\\;/g," | "),start:u()(e.dtstart).toDate(),end:u()(e.dtend).toDate()}}))}}]),e}(),j=u()();j.locale("de");var O={isLoading:!1,eventData:[],dateContext:j,today:j.date(),month:j.month()+1,year:j.year(),error:!1,setIsLoading:function(e){},setEventData:function(e){},setDateContext:function(e){},setToday:function(e){},setMonth:function(e){},setYear:function(e){},setError:function(e){}},y=r.a.createContext(O),w=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(j),u=Object(o.a)(s,2),d=u[0],b=u[1],h=Object(n.useState)(j.date()),p=Object(o.a)(h,2),O=p[0],w=p[1],k=Object(n.useState)(j.month()+1),x=Object(o.a)(k,2),D=x[0],S=x[1],C=Object(n.useState)(j.year()),F=Object(o.a)(C,2),Y=F[0],A=F[1],N=Object(n.useState)(!1),T=Object(o.a)(N,2),L=T[0],M=T[1],W=Object(n.useState)(!1),B=Object(o.a)(W,2),H=B[0],I=B[1],P={isLoading:L,eventData:l,dateContext:d,today:O,month:D,year:Y,error:H},z={setIsLoading:M,setEventData:i,setDateContext:b,setToday:w,setMonth:S,setYear:A,setError:I},G=Object(E.a)({},P,{},z);return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.request({method:"GET",url:"https://hwr-wi-204.sagebiels.org/api/v1/events"});case 2:t=e.sent,i(g.mergeAssociatedEvents(t.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){I(e.isAxiosError)}))}),[]),r.a.createElement(y.Provider,{value:G},t)},k=function(){return Object(n.useContext)(y)},x=(a(110),a(111),a(112),a(121)),D=a(51),S=a.n(D),C=function(e){var t=e.todayWeather;return r.a.createElement("div",{className:"temperature-display"},r.a.createElement("p",null,r.a.createElement("span",{style:{color:"rgba(255,91,107,0.71)"}},"Hoch:",t[0].temperatureHigh,"C",S.a.decode("&deg")),r.a.createElement("br",null),r.a.createElement("span",{style:{color:"rgba(79,141,255,0.85)"}},"Tief: ",t[0].temperatureLow,"C",S.a.decode("&deg"))))},F=a(74),Y=a.n(F),A=function(e){var t=e.icon;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{className:"weather-icon",icon:t.toUpperCase().replace(new RegExp("-","g"),"_"),color:"grey",autoplay:!0}))},N=a(124),T=function(e){var t=e.message;return r.a.createElement(N.a,{variant:"danger",id:"fetching-error"},t?{message:t}:r.a.createElement(r.a.Fragment,null,"Fehler"))},L=function(e){var t=e.label,a=e.date,c=Object(n.useState)(),l=Object(o.a)(c,2),i=l[0],s=l[1],d=Object(n.useState)(!0),E=Object(o.a)(d,2),b=E[0],h=E[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),j=g[0],O=g[1],y=Object(n.useState)(0),w=Object(o.a)(y,2),k=w[0],D=w[1];return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://proncal-weather-api.dns-cloud.net/"+u()(a).unix());case 2:t=e.sent,s(t.data.daily.data),D(Number(t.headers.get("X-Forecast-API-Calls")));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k<995?function(){return e.apply(this,arguments)}().catch((function(e){return O(e.isAxiosError)})).finally((function(){return h(!1)})):(O(!0),h(!1))}),[k,a]),r.a.createElement("div",null,b&&void 0===i?r.a.createElement(r.a.Fragment,null,t,r.a.createElement(x.a,{animation:"grow",variant:"dark"})):j?r.a.createElement(r.a.Fragment,null,t,r.a.createElement(T,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"inline-block",flexDirection:"row",margin:"5px"}},t,r.a.createElement(A,{icon:i[0].icon})),r.a.createElement(C,{todayWeather:i})))},M=a(125),W=function(){var e=k(),t=e.eventData,a=e.dateContext,c=k().error,l=Object(i.b)(u.a),s=Object(n.useState)(void 0),d=Object(o.a)(s,2),m=d[0],f=d[1];return Object(n.useEffect)((function(){f(g.transformToApiEvent(t))}),[t]),r.a.createElement("div",null,c?r.a.createElement(T,null):m?r.a.createElement(i.a,{localizer:l,events:m,defaultView:"week",views:["day","week"],endAccessor:"end",startAccessor:"start",timeslots:12,step:5,min:new Date(1,1,1,8),max:new Date(1,1,1,22),components:{event:function(e){return t=e,r.a.createElement("div",{className:"event-card"},t.title);var t},timeGutterHeader:function(){return null},week:{header:function(e){return u()(e.date).week()===a.week()?r.a.createElement("div",{className:"rbc-header"},r.a.createElement(L,{label:e.label,date:e.date})):r.a.createElement("div",null,e.label,r.a.createElement("p",{className:"weather-forecast-not"},"Voraussage in: ",u.a.duration(u()(e.date).diff(a)).asDays().toFixed(0)+" ","Tagen"))}}}}):r.a.createElement(M.a,{variant:"info",animated:!0}))},B=function(){var e=k(),t=e.eventData,a=e.isLoading,c=Object(n.useState)(),l=Object(o.a)(c,2),i=l[0],s=l[1],d=Object(n.useState)(),m=Object(o.a)(d,2),f=m[0],E=m[1],b=Object(n.useState)(),v=Object(o.a)(b,2),h=v[0],p=v[1];return Object(n.useEffect)((function(){void 0!==t[0]&&(s(u()(t[0].dtstart)),E(u()(t[t.length-1].dtend)),p(u()(t[t.length-1].dtend).from(u()(t[0].dtstart),!0)))}),[a,t]),r.a.createElement(r.a.Fragment,null,!a&&void 0!==f&&void 0!==i&&r.a.createElement("div",{className:"calendar-metadata-container"},r.a.createElement("h6",null,"Semesterstart: ",r.a.createElement("b",null,null===i||void 0===i?void 0:i.format("DD.MM.YYYY"))," | "),r.a.createElement("h6",null,"Semesterende: ",r.a.createElement("b",null,null===f||void 0===f?void 0:f.format("DD.MM.YYYY"))," | "),r.a.createElement("h6",null,"Zeit bis zum Semesterende: ",r.a.createElement("b",null,h))))},H=a(123),I=a(122),P=a(76),z=a.n(P),G=a(77),J=a.n(G),R=function(){return r.a.createElement(H.a,{bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(I.a,null,r.a.createElement(H.a.Brand,null,r.a.createElement("img",{alt:"failed to load logo",src:z.a,width:"30",height:"30",className:"d-inline-block align-top mr-4"}),"HWR Berlin - Stundenplan")),r.a.createElement("div",{className:"trademark",style:{color:"white"}},r.a.createElement("em",null,"Wetterabfrage - Powered by Dark Sky"),r.a.createElement("img",{src:J.a,alt:"Fehler"})))},V=a(79),q=a(28),U=(a(116),function(){return r.a.createElement(V.a,{basename:"/proncal"},r.a.createElement(q.a,{exact:!0,path:"/"},r.a.createElement(R,null),r.a.createElement(w,null,r.a.createElement(W,null),r.a.createElement(B,null))),r.a.createElement("footer",{id:"footer"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a.p+"static/media/hwr-logo-alt.244061df.svg"},77:function(e,t,a){e.exports=a.p+"static/media/darkskylogo.a509dfef.png"},84:function(e,t,a){e.exports=a(119)}},[[84,1,2]]]);
//# sourceMappingURL=main.a1977be8.chunk.js.map